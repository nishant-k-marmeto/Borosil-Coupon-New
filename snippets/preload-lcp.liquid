{%- if template.name == 'index' -%}
  {% assign preload_image_desktop = settings.preload_image_desktop %}
  {% assign preload_image_mobile = settings.preload_image_mobile %}

  {% if preload_image_desktop != blank %}
    <link
      rel="preload"
      as="image"
      fetchpriority="high"
      media="(min-width: 768px)"
      href="{{ preload_image_desktop | image_url }}"
      imagesrcset="
        {%- if preload_image_desktop.width >= 375 -%}{{ preload_image_desktop | image_url: width: 375 }} 375w,{%- endif -%}
        {%- if preload_image_desktop.width >= 550 -%}{{ preload_image_desktop | image_url: width: 550 }} 550w,{%- endif -%}
        {%- if preload_image_desktop.width >= 750 -%}{{ preload_image_desktop | image_url: width: 750 }} 750w,{%- endif -%}
        {%- if preload_image_desktop.width >= 1100 -%}{{ preload_image_desktop | image_url: width: 1100 }} 1100w,{%- endif -%}
        {%- if preload_image_desktop.width >= 1500 -%}{{ preload_image_desktop | image_url: width: 1500 }} 1500w,{%- endif -%}
        {%- if preload_image_desktop.width >= 1780 -%}{{ preload_image_desktop | image_url: width: 1780 }} 1780w,{%- endif -%}
        {%- if preload_image_desktop.width >= 2000 -%}{{ preload_image_desktop | image_url: width: 2000 }} 2000w,{%- endif -%}
        {%- if preload_image_desktop.width >= 3000 -%}{{ preload_image_desktop | image_url: width: 3000 }} 3000w,{%- endif -%}
        {%- if preload_image_desktop.width >= 3840 -%}{{ preload_image_desktop | image_url: width: 3840 }} 3840w,{%- endif -%}
        {{ preload_image_desktop | image_url }} {{ preload_image_desktop.width -}}w
      "
      imagesizes="100vw"
    >
  {% endif %}

  {% if preload_image_mobile != blank %}
    <link
      rel="preload"
      as="image"
      fetchpriority="high"
      data-w="{{ preload_image.width }}"
      media="(max-width: 767px)"
      href="{{ preload_image_mobile | image_url }}"
      imagesrcset="
        {%- if preload_image_mobile.width >= 375 -%}{{ preload_image_mobile | image_url: width: 375 }} 375w,{%- endif -%}
        {%- if preload_image_mobile.width >= 550 -%}{{ preload_image_mobile | image_url: width: 550 }} 550w,{%- endif -%}
        {%- if preload_image_mobile.width >= 750 -%}{{ preload_image_mobile | image_url: width: 750 }} 750w,{%- endif -%}
        {%- if preload_image_mobile.width >= 1100 -%}{{ preload_image_mobile | image_url: width: 1100 }} 1100w,{%- endif -%}
        {%- if preload_image_mobile.width >= 1500 -%}{{ preload_image_mobile | image_url: width: 1500 }} 1500w,{%- endif -%}
        {%- if preload_image_mobile.width >= 1780 -%}{{ preload_image_mobile | image_url: width: 1780 }} 1780w,{%- endif -%}
        {%- if preload_image_mobile.width >= 2000 -%}{{ preload_image_mobile | image_url: width: 2000 }} 2000w,{%- endif -%}
        {%- if preload_image_mobile.width >= 3000 -%}{{ preload_image_mobile | image_url: width: 3000 }} 3000w,{%- endif -%}
        {%- if preload_image_mobile.width >= 3840 -%}{{ preload_image_mobile | image_url: width: 3840 }} 3840w,{%- endif -%}
        {{ preload_image_mobile | image_url }} {{ preload_image_mobile.width -}}w
      "
      imagesizes="100vw"
    >
  {% endif %}
{%- elsif template.name == 'product' -%}
  {% assign preload_image_desktop = product.images[0] %}
  {% assign preload_image_mobile = product.images[0] %}

  {% if preload_image_desktop != blank %}
    <link
      rel="preload"
      as="image"
      fetchpriority="high"
      media="(min-width: 768px)"
      href="{{ preload_image_desktop | image_url }}"
      imagesrcset="
        {%- if preload_image_desktop.width >= 375 -%}{{ preload_image_desktop | image_url: width: 375 }} 375w,{%- endif -%}
        {%- if preload_image_desktop.width >= 550 -%}{{ preload_image_desktop | image_url: width: 550 }} 550w,{%- endif -%}
        {%- if preload_image_desktop.width >= 750 -%}{{ preload_image_desktop | image_url: width: 750 }} 750w,{%- endif -%}
        {%- if preload_image_desktop.width >= 1100 -%}{{ preload_image_desktop | image_url: width: 1100 }} 1100w,{%- endif -%}
        {%- if preload_image_desktop.width >= 1500 -%}{{ preload_image_desktop | image_url: width: 1500 }} 1500w,{%- endif -%}
        {%- if preload_image_desktop.width >= 1780 -%}{{ preload_image_desktop | image_url: width: 1780 }} 1780w,{%- endif -%}
        {%- if preload_image_desktop.width >= 2000 -%}{{ preload_image_desktop | image_url: width: 2000 }} 2000w,{%- endif -%}
        {%- if preload_image_desktop.width >= 3000 -%}{{ preload_image_desktop | image_url: width: 3000 }} 3000w,{%- endif -%}
        {%- if preload_image_desktop.width >= 3840 -%}{{ preload_image_desktop | image_url: width: 3840 }} 3840w,{%- endif -%}
        {{ preload_image_desktop | image_url }} {{ preload_image_desktop.width -}}w
      "
      imagesizes="50vw"
    >
  {% endif %}

  {% if preload_image_mobile != blank %}
    <link
      rel="preload"
      as="image"
      fetchpriority="high"
      data-w="{{ preload_image.width | default: 'erf' }}"
      media="(max-width: 767px)"
      href="{{ preload_image_mobile | image_url }}"
      imagesrcset="
        {%- if preload_image_mobile.width >= 375 -%}{{ preload_image_mobile | image_url: width: 375 }} 375w,{%- endif -%}
        {%- if preload_image_mobile.width >= 550 -%}{{ preload_image_mobile | image_url: width: 550 }} 550w,{%- endif -%}
        {%- if preload_image_mobile.width >= 750 -%}{{ preload_image_mobile | image_url: width: 750 }} 750w,{%- endif -%}
        {%- if preload_image_mobile.width >= 1100 -%}{{ preload_image_mobile | image_url: width: 1100 }} 1100w,{%- endif -%}
        {%- if preload_image_mobile.width >= 1500 -%}{{ preload_image_mobile | image_url: width: 1500 }} 1500w,{%- endif -%}
        {%- if preload_image_mobile.width >= 1780 -%}{{ preload_image_mobile | image_url: width: 1780 }} 1780w,{%- endif -%}
        {%- if preload_image_mobile.width >= 2000 -%}{{ preload_image_mobile | image_url: width: 2000 }} 2000w,{%- endif -%}
        {%- if preload_image_mobile.width >= 3000 -%}{{ preload_image_mobile | image_url: width: 3000 }} 3000w,{%- endif -%}
        {%- if preload_image_mobile.width >= 3840 -%}{{ preload_image_mobile | image_url: width: 3840 }} 3840w,{%- endif -%}
        {{ preload_image_mobile | image_url }} {{ preload_image_mobile.width -}}w
      "
      imagesizes="100vw"
    >
  {% endif %}
{%- elsif template.name == 'collection' -%}
  {% assign preload_image_desktop = collection.products[0].featured_media.preview_image %}

  {% if preload_image_desktop != blank %}
    <link
      rel="preload"
      as="image"
      fetchpriority="high"
      media="(min-width: 768px)"
      href="{{ preload_image_desktop | image_url }}"
      imagesrcset="
        {%- if preload_image_desktop.width >= 375 -%}{{ preload_image_desktop | image_url: width: 375 }} 375w,{%- endif -%}
        {%- if preload_image_desktop.width >= 550 -%}{{ preload_image_desktop | image_url: width: 550 }} 550w,{%- endif -%}
        {%- if preload_image_desktop.width >= 750 -%}{{ preload_image_desktop | image_url: width: 750 }} 750w,{%- endif -%}
        {%- if preload_image_desktop.width >= 1100 -%}{{ preload_image_desktop | image_url: width: 1100 }} 1100w,{%- endif -%}
        {%- if preload_image_desktop.width >= 1500 -%}{{ preload_image_desktop | image_url: width: 1500 }} 1500w,{%- endif -%}
        {%- if preload_image_desktop.width >= 1780 -%}{{ preload_image_desktop | image_url: width: 1780 }} 1780w,{%- endif -%}
        {%- if preload_image_desktop.width >= 2000 -%}{{ preload_image_desktop | image_url: width: 2000 }} 2000w,{%- endif -%}
        {%- if preload_image_desktop.width >= 3000 -%}{{ preload_image_desktop | image_url: width: 3000 }} 3000w,{%- endif -%}
        {%- if preload_image_desktop.width >= 3840 -%}{{ preload_image_desktop | image_url: width: 3840 }} 3840w,{%- endif -%}
        {{ preload_image_desktop | image_url }} {{ preload_image_desktop.width -}}w
      "
      imagesizes="50vw"
    >
  {% endif %}

  {% if preload_image_mobile != blank %}
    <link
      rel="preload"
      as="image"
      fetchpriority="high"
      media="(max-width: 767px)"
      href="{{ preload_image_mobile | image_url }}"
      imagesrcset="
        {%- if preload_image_mobile.width >= 375 -%}{{ preload_image_mobile | image_url: width: 375 }} 375w,{%- endif -%}
        {%- if preload_image_mobile.width >= 550 -%}{{ preload_image_mobile | image_url: width: 550 }} 550w,{%- endif -%}
        {%- if preload_image_mobile.width >= 750 -%}{{ preload_image_mobile | image_url: width: 750 }} 750w,{%- endif -%}
        {%- if preload_image_mobile.width >= 1100 -%}{{ preload_image_mobile | image_url: width: 1100 }} 1100w,{%- endif -%}
        {%- if preload_image_mobile.width >= 1500 -%}{{ preload_image_mobile | image_url: width: 1500 }} 1500w,{%- endif -%}
        {%- if preload_image_mobile.width >= 1780 -%}{{ preload_image_mobile | image_url: width: 1780 }} 1780w,{%- endif -%}
        {%- if preload_image_mobile.width >= 2000 -%}{{ preload_image_mobile | image_url: width: 2000 }} 2000w,{%- endif -%}
        {%- if preload_image_mobile.width >= 3000 -%}{{ preload_image_mobile | image_url: width: 3000 }} 3000w,{%- endif -%}
        {%- if preload_image_mobile.width >= 3840 -%}{{ preload_image_mobile | image_url: width: 3840 }} 3840w,{%- endif -%}
        {{ preload_image_mobile | image_url }} {{ preload_image_mobile.width -}}w
      "
      imagesizes="100vw"
    >
  {% endif %}
{%- endif -%}

{% if template.name == 'article' %}
  {% assign preload_article_image = article.image %}
  <link
    rel="preload"
    as="image"
    fetchpriority="high"
    media="(max-width: 767px)"
    href="{{ preload_article_image | image_url }}"
    imagesrcset="
      {%- if preload_article_image.width >= 375 -%}{{ preload_article_image | image_url: width: 375 }} 375w,{%- endif -%}
      {%- if preload_article_image.width >= 550 -%}{{ preload_article_image | image_url: width: 550 }} 550w,{%- endif -%}
      {%- if preload_article_image.width >= 750 -%}{{ preload_article_image | image_url: width: 750 }} 750w,{%- endif -%}
      {%- if preload_article_image.width >= 1100 -%}{{ preload_article_image | image_url: width: 1100 }} 1100w,{%- endif -%}
      {%- if preload_article_image.width >= 1500 -%}{{ preload_article_image | image_url: width: 1500 }} 1500w,{%- endif -%}
      {%- if preload_article_image.width >= 1780 -%}{{ preload_article_image | image_url: width: 1780 }} 1780w,{%- endif -%}
      {%- if preload_article_image.width >= 2000 -%}{{ preload_article_image | image_url: width: 2000 }} 2000w,{%- endif -%}
      {%- if preload_article_image.width >= 3000 -%}{{ preload_article_image | image_url: width: 3000 }} 3000w,{%- endif -%}
      {%- if preload_article_image.width >= 3840 -%}{{ preload_article_image | image_url: width: 3840 }} 3840w,{%- endif -%}
      {{ preload_article_image | image_url }} {{ preload_article_image.width -}}w
    "
    imagesizes="100vw"
  >
{% endif %}