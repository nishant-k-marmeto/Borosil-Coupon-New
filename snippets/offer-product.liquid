

{% assign meta_data = product.metafields.offer.discount_product_pdp.value %}
{% assign product_handle = meta_data | split: '|' | first | escape %}
{% assign variant_id = meta_data | split: '|' | last | split: '--' | first %}
{% assign discount = meta_data | split: '--' | last %}
{% assign my_secret_string = "myborosil" | sha256 %}
{% assign my_secret_string_ext = my_secret_string | slice: 0, 36 %}
{% assign my_secret_string = my_secret_string | append: my_secret_string_ext %}
{% assign my_secret_string = my_secret_string | slice: 0, discount %}

{% assign offer_product = all_products[product_handle] %}

{% for variant in offer_product.variants %} 
    {% assign curr_variant_id = variant.id | escape %}
    {% if curr_variant_id == variant_id %} 
        {% if variant.available %}
            <div class="offer-product__container offr-prod" data-token="{{ discount }}">
                <div class="offer-product__heading">{{ product.title }} Offer:</div>
                {% render 'product-offer-product-card', 
                    product_card_product: offer_product, 
                    media_size: 'adapt', 
                    show_secondary_image: false, 
                    add_image_padding: false, 
                    show_vendor: false, 
                    show_image_outline: false, 
                    discount: discount,
                    variant_id: variant_id,
                    variant: variant,
                    product_handle: product_handle,
                    show_rating: false %}
            </div>
        {% endif %}
    {% endif %}
{% endfor %}
<style>
    .offer-product__price {
        color: #fff;
    }
    .offer-product__heading {
        margin: 10px 0;
    }
    .offr-prod .card-information {
        display: flex;
        align-items: center;
    }
    .offr-prod .cart-upsell-product-card .product-grid-add-to-cart {
        width: 100%;
    }
    .cart-upsell-product-card .card.card--product .card__inner .media img {
        max-width: unset!important;
        max-height: unset!important;
    }
    .offr-prod .card-wrapper {
        border: 1px solid grey;
        border-radius: 5px;
    }
    .offr-prod .round {
        position: relative;
   }
    .offr-prod .round label {
        background-color: #fff;
        border: 1px solid #ccc;
        border-radius: 4px;
        cursor: pointer;
        height: 28px; 
        left: 0;
        position: absolute;
        top: 0;
        width: 28px;
   }
    .offr-prod .round label:after {
        border: 2px solid #fff;
        border-top: none;
        border-right: none;
        content: "";
        height: 6px;
        left: 7px;
        opacity: 0;
        position: absolute;
        top: 8px;
        transform: rotate(-45deg);
        width: 12px;
   }
    .offr-prod .round input[type="checkbox"] {
        visibility: hidden;
   }
    .offr-prod .round input[type="checkbox"]:checked + label {
        background-color: #66bb6a;
        border-color: #66bb6a;
   }
    .offr-prod .round input[type="checkbox"]:checked + label:after {
        opacity: 1;
   }
    .offr-prod .container {
        margin: 0 auto;
   }
   .offr-prod .card-wrapper.cart-upsell-product-card {
        padding: 8px;
   }


  .offr-prod .card-wrapper.cart-upsell-product-card {
    background-color: #013564;
    color: #fff;
    max-width: 80%;
  }
  
  .offr-prod .card-information__text {
    color: #fff;
  }
  
  .offr-prod .free-text {
    font-size: 20px;
    font-weight: 600;
    color: #fff;
  }
  .cart-upsell-product-card .card.card--product {
    border-radius: 4px;
  }

    @media only screen and (max-width: 767px) {

        .offr-prod .free-text {
            font-size: 15px;
        }
    }
</style>